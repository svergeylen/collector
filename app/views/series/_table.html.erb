<%= form_with(model: @new_item, local: true, class:"form-horizontal") do |form| %>

	<table class="table table-striped table-condensed vertical-center " id="product-list">
	  <thead>
		  <tr>
		    <th></th>
		    
		    <th>Titre</th>
			<th>Auteurs</th>
			<th></th>
			<th></th>
			<th></th>
		  </tr>
	  </thead>
	  <tbody>
		<% items.each do |item| %>
			<% if item.is_owned_by?(current_user.id) %>
				<tr class="owned-by-user">
			<%else %>
				<tr class="not-owned-by-user">
			<% end %>
				
				<td class="text-center"><%= friendly(item.number) %></td>
				
				<td>
					<%= link_to item.name, item %></a>
				</td>
				<td> 
					<%= item.authors.map{ |author| link_to(author.name, author) }.join(", ").html_safe %>
				</td>
				<td>
					<%= react_component "ItemQuantity", render(template: 'items/_quantity.json.jbuilder', locals: {item: item})  %>
 


<!--		render(template: 'items/_quantity.json.jbuilder', locals: {item: item})


			<div class="quantity_management">
						<%# link_to minus_item_path(item), remote: true do %>
							<span class="glyphicon glyphicon-minus" title="Diminuer"></span>
						<%# end %>
						<span class="quantity" data-item-id="<%= item.id.to_s %>">
							<%= item.quantity_for(current_user.id).to_s %>
						</span>
				 		<%# link_to plus_item_path(item), remote: true do %>
					 		<span class="glyphicon glyphicon-plus" title="Augmenter"></span>
				 		<%# end %>
				 	-->
				 	</div>
			 	</td>
			 	<td>
					<%= react_component "UpVote", render(template: 'items/_item.json.jbuilder', locals: {item: item}) , class: "upvote-in-table" %>
				</td>
				<td>
			  		<%= link_to edit_item_path(item) do %>
						<span class="glyphicon glyphicon-edit"></span>
					<% end %>
					&nbsp;
					<%= link_to item, method: :delete, data: { confirm: "Etes vous certain de supprimer cet élément ?" } do %>
			  			<span class="glyphicon glyphicon-trash"></span>
					<% end %>
			  	</td>
			</tr>
		<% end %>


		<tr>
			<td>
				<%= form.text_field :number, id: :item_number, value: friendly(@new_item.number), placeholder: "n°", class: "form-control", size: 1 %>
			</td>
			<td>
				<%= form.text_field :name, id: :item_name, placeholder:"Titre", size: 36, class: "form-control" %>
			</td>
			<td>
				<%= form.text_field :authors_list, size: 30, placeholder: "Auteurs, séparés par une virgule", class: "form-control" %>
			</td>
			<td>
				<%= form.hidden_field :series_id %>
	      		<%= form.submit "Créer" %>
			</td>
		</tr>

	  </tbody>
	</table>

  <% if @new_item.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@new_item.errors.count, "error") %> prohibited this item from being saved:</h2>

      <ul>
      <% @new_item.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<% end %>