<%= form_with(model: @new_item) do |form| %>

	<table class="table table-sm">
	  <tbody>
		<% items.each do |item| %>
			<% if item.is_owned_by?(current_user.id) %>
				<tr class="owned-by-user">
			<%else %>
				<tr class="not-owned-by-user">
			<% end %>
					<td class="text-center align-middle">
						<%= item.friendly_number %>
					</td>
					<td class="align-middle">
						<%= link_to item.name, item %></a>
					</td>
					<td class="align-middle">
						<%= item.different_tags(session[:active_tags]).collect { |tag| link_to tag.name, tag }.join(", ").html_safe %>
					</td>
					<td class="align-middle">
						<% item.users.each do |user| %>
							<%= link_to user do %>
								<%= profile_picture(user) %>
							<% end %>
						<% end %>
					</td>
				</tr>
		<% end %>

		<tr>
			<td>
				<%= form.text_field :number, id: :item_number, value: "", placeholder: "nÂ°", class: "form-control", size: 1 %>
			</td>
			<td>
				<%= form.text_field :name, id: :item_name, placeholder:"Titre", class: "form-control" %>
			</td>
			<td>
	      		<%= form.text_field :item_tags, id: :item_tags, placeholder:"Tags", class: "form-control" %>
			</td>
			<td>
				<%= form.submit "Ajouter", class:"btn btn-light" %>
			</td>
		</tr>

	  </tbody>
	</table>

  <% if @new_item.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@new_item.errors.count, "error") %> prohibited this item from being saved:</h2>

      <ul>
      <% @new_item.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<% end %>
