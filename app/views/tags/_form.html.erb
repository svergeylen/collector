<%= form_with model: tag, local: true, class:"form-horizontal" do |form| %>

 <% if tag.errors.any? %>
    <div class="alert alert-danger" role="alert">
        <%= pluralize(tag.errors.count, "erreur") %> bloquent la création de ce tag :
      <ul>
        <% tag.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group row">
    <label class="col-form-label col-sm-2" for="tag_name">Nom</label>
    <div class="col-sm-4">
      <%= form.text_field :name, id: "tag_name", class: "form-control",autocomplete: :off, autofocus: true %>
    </div>
    <div class="col-sm-2">
      <label class="col-form-label col-sm-2" for="tag_letter">Classement</label>
    </div>
    <div class="col-sm-2">
      <%= form.text_field :letter, id: :tag_letter, class: "form-control", autocomplete: :off %>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-form-label col-sm-2" for="parent_tag_names">Parents</label>
    <div class="col-sm-8">
      <%= form.text_field :parent_tag_names, id: "parent_tag_names", class: "form-control", autocomplete: :off, data: { tag_list: @tag_list } %>
    </div>
  </div>

  <% if @tag.tags.present? %>
    <div class="form-group row">
      <div class="col-sm-2">Enfants</div>
      <div class="col-sm-8">
        <%= render_tags @tag.children.limit(20) %>
        <%= "etc." if @tag.children.count > 20 %>
      </div>
    </div>
  <% end %>

  <% if @tag.items.present? %>
    <div class="form-group row">
      <div class="col-sm-2">Items</div>
      <div class="col-sm-8">
        <% @tag.items.order(name: :asc).limit(20).each do |item| %>
          <%= link_to item.name, item, class:"high-color" %>, 
        <% end %>
        <%= "etc." if @tag.children.count > 20 %>
      </div>
    </div>
  <% end %>
  
  <div class="form-group row">
    <div class="col-form-label col-sm-2" >
      Affichage
    </div>
    <div class="col-sm-3">
       <%= form.select(:default_view, options_for_select([ ["Liste", "list"],["Galerie", "gallery"] ], @tag.default_view), {}, { class:"form-control" } ) %>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-sm-2 ">
      Options
    </div>
		<div class="col-sm-10">
      <div class="form-check">
        <%= form.label :filter_items do %>
          <%= form.check_box :filter_items, id: :tag_filter_items, class:"form-check-input" %> <span title="Si coché (true), les items seront filtrés pour n'afficher que ceux liés explicitement à ce tag. Décoché (false), ce tag ne sert pas à filtrer les items et n'est utile qu'à la navigation (classement).">Filtre les items</span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <div class="offset-sm-2 col-sm-10">
      <%= form.submit submit_text, class: "btn btn-primary" %>
    </div>
  </div>

<% end %>
